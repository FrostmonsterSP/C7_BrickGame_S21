# Спецификация конечного автомата игры

[TOC]

## Граф состояний автомата 

<div align="center">
    @dotfile engine_graph.dot
</div>

Каждое состояние определяет, как игра реагирует на события, такие как нажатия клавиш или обновления таймера. Переходы между состояниями обрабатываются через вызов соответствующих функций, которые могут изменять состояние игры, перемещать фигуры или управлять паузами и завершением игры.
Логика переходов хранится в статическом массиве типа StateTransition_t StateTable в event_handlers.h и управляется функцией handleEvent.

@see engine.h
@see event_handlers.h
@ref StateTable

## Состояния автомата

   - `State0`: Начальное состояние (до инициализации)
   - `StateInit`: Инициализированное состояние (например, экран выбора настроек перед игрой)
   - `StateAction`: Состояние обработки действий пользователя
   - `StateShift`: Состояние сдвига фигуры
   - `StateIdle`: Бездействие (игра на паузе)
   - `StateSpawn`: Появление новой фигуры
   
## События перехода
   - `EventInit`: Начальная инициализация игры
   - `EventRight`: Нажатие вправо (движение фигуры вправо или увеличение уровня)
   - `EventUp`: Нажатие вверх (увеличение скорости)
   - `EventLeft`: Нажатие влево (движение фигуры влево или уменьшение уровня)
   - `EventDown`: Нажатие вниз (увеличение скорости или сброс фигуры)
   - `EventStart`: Начало игры
   - `EventAction`: Поворот фигуры
   - `EventTick`: Истечение таймера сдвига фигуры вниз
   - `EventPause`: Пауза
   - `EventTerminate`: Завершение игры
   - `EventPlaceFree`: Фигура свободно разместилась на поле
   - `EventTouchdown`: Фигура коснулась земли или другой фигуры
